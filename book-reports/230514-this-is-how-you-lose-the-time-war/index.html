<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Literature," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="《你如何在时间战争里败北》读完觉得精彩极了，打算再读一遍之后来写。
和很多人一样，我也是因为bigolas dickolas wolfwood的这条推特开始读这本书的，这在传播学算是一个有趣的案例——网络上许多人“发疯”，但是不是每一个发疯的都能达到这样的效果，还是作品本身质量过硬，名副其实。不过不是我要讨论的重点。
第一次读这本书是在里腾豪斯，比较匆忙，关于双方的设定其实也没搞明白，主要是读两">
<meta property="og:type" content="article">
<meta property="og:title" content="This Is How You Lose the Time War">
<meta property="og:url" content="https://dori-min.github.io/book-reports/230514-this-is-how-you-lose-the-time-war/index.html">
<meta property="og:site_name" content="Dori-min">
<meta property="og:description" content="《你如何在时间战争里败北》读完觉得精彩极了，打算再读一遍之后来写。
和很多人一样，我也是因为bigolas dickolas wolfwood的这条推特开始读这本书的，这在传播学算是一个有趣的案例——网络上许多人“发疯”，但是不是每一个发疯的都能达到这样的效果，还是作品本身质量过硬，名副其实。不过不是我要讨论的重点。
第一次读这本书是在里腾豪斯，比较匆忙，关于双方的设定其实也没搞明白，主要是读两">
<meta property="og:updated_time" content="2023-12-16T17:28:15.237Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="This Is How You Lose the Time War">
<meta name="twitter:description" content="《你如何在时间战争里败北》读完觉得精彩极了，打算再读一遍之后来写。
和很多人一样，我也是因为bigolas dickolas wolfwood的这条推特开始读这本书的，这在传播学算是一个有趣的案例——网络上许多人“发疯”，但是不是每一个发疯的都能达到这样的效果，还是作品本身质量过硬，名副其实。不过不是我要讨论的重点。
第一次读这本书是在里腾豪斯，比较匆忙，关于双方的设定其实也没搞明白，主要是读两">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"hide","offset":12,"offset_float":12,"b2t":true,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://dori-min.github.io/book-reports/230514-this-is-how-you-lose-the-time-war/"/>





  <title>This Is How You Lose the Time War | Dori-min</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Dori-min</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Keep Dori-min</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-random">
          <a href="/random.html" rel="section">
            
            Random
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dori-min.github.io/book-reports/230514-this-is-how-you-lose-the-time-war/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dori-min">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dori-min">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">This Is How You Lose the Time War</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-05-14T08:00:57-04:00">
                2023-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Book-Report/" itemprop="url" rel="index">
                    <span itemprop="name">Book Report</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <a id="more"></a>
<p>《你如何在时间战争里败北》读完觉得精彩极了，打算再读一遍之后来写。</p>
<p>和很多人一样，我也是因为<a href="https://twitter.com/maskofbun/status/1655084850926473216?s=20" target="_blank" rel="external">bigolas dickolas wolfwood的这条推特</a>开始读这本书的，<a href="https://bookriot.com/bigolas-dickolas-and-this-is-how-you-lose-the-time-war/" target="_blank" rel="external">这在传播学算是一个有趣的案例</a>——网络上许多人“发疯”，但是不是每一个发疯的都能达到这样的效果，还是作品本身质量过硬，名副其实。不过不是我要讨论的重点。</p>
<p>第一次读这本书是在里腾豪斯，比较匆忙，关于双方的设定其实也没搞明白，主要是读两个人感情充沛的信，情节转折揪着我的心。给我的第一感觉就是作品B——优美的语言，极致优美，诗意的让人心碎的譬喻。情节说不上多复杂，但是又需要一定的耐心才能从种种语言的线索里找出信息。并不是那种滥情的散文，而是一种萨福的心情。</p>
<p>我不敢说我完全懂得萨福，但是我能断定Sapphic和Lesbian是两种不同的角度：<u>Sapphic</u>是一种诗意的抒发，甚至我认为无关女同与否，其中有厄洛斯的意象和边界跨越的内涵，或者直白地说就是“欲望”的体现（更具体的可以读卡森或者田晓菲相关著作）；而<u>Lesbian</u>更多是强调客观上女同性恋的配对。顺带一提的是日语语境的<u>“百合”</u>，则更多是强调了一种经常是学校为背景的“姐妹”情结。这些标签是不能混淆随便乱贴的。</p>
<p>其实这本书的长度也不过是作品B的三分之一，今天重读的时候感觉后面节奏快了一点，但是总体来说还是比较慢热的节奏。科幻的部分其实并没有那么硬核，但是时间旅行的概念十分有趣，想起新海诚的《星之声》，当时间线拉长的时候读者的心也跟着拓延，冲击力也跟着增大。</p>
<p>推一首适合这本书的歌：Anthony Lazaro &amp; Sarah Kang 的<em>Time Traveling</em>，封面刚好也是一红一蓝。</p>
<details>
    <summary> 【点击剧透】 </summary>
    <ol>
    <p>梗概是有两个势力，他们一个时间正着流（往未来）一个反着流（往过去），有两个人，红和蓝，分别属于两个势力，她们却彼此通信，了解对方的世界。
    </p>
    </ol>
</details>

<hr>
<p><strong>以下是摘抄，有大量剧透。</strong>也有横读作品B。</p>
<blockquote>
<p>It is a trap. Poison would be crude, but she smells none.</p>
</blockquote>
<p>后来再在开头读到这句话，有一个猜想——会不会是那种轮回本，红蓝轮流毒杀，轮流拯救，在时间的旅行中获得永远的救赎。</p>
<blockquote>
<p>I’ll be long gone by the time the wind turns right. Made you look, though, didn’t I?</p>
</blockquote>
<p> 道阻且右
　</p>
<blockquote>
<p>Mrs. Leavitt’s Guide to Etiquette and Correspondence</p>
</blockquote>
<p>一本反复提到的书。想来也挺可爱的，像是小孩牙牙学语，精明的刺客也要看参考书学写信。
　</p>
<blockquote>
<p>Let me also speak plain, before this tree runs out of years, before the fine fellows under your command make siege weapons of my words: <strong>What do you want from this, Red? What are you doing here?</strong><br><strong>Tell me something true, or tell me nothing at all</strong></p>
</blockquote>
<p>你究竟想要什么？这个时候还是怀有一丝敌意，怕是两面间谍，怕是辜负。想起作品B里去完甜品店见了M的朋友们的夜晚，精明如她确信一切都不会有好下场，但是最后还是失去了控制。<em>受伤总比失去控制好</em>，她说。</p>
<blockquote>
<p>And I felt lonely. I missed those voices. I missed the minds behind them. I wanted to be seen. That need dug into the heart of me. It felt good. I’m not certain how to compare this to something you would know, but, imagine a person melded to a Thing, an artificial god the size of mountains, built for making war in the far corners of the cosmos. Imagine that great weight of metal all around her, pressing her down, giving her strength, its hoses melding with her flesh. Imagine she shears the hoses off, steps out: frail, sapped, weak, free.</p>
</blockquote>
<p>　</p>
<blockquote>
<p>As the prophet says: Everybody’s building them big ships and boats.</p>
</blockquote>
<p>这是鲍勃迪伦的歌词。</p>
<blockquote>
<p>Don’t shorten your letters.</p>
</blockquote>
<p>我真的很珍惜每个给我写一大段话的人（不是60s语音或者语音转文字）。因为文字是需要过滤和整合才能输出的，所以——能写多长写多长，我不怕看长篇大论的。尽管是红在结尾问的，蓝在开头这一掷地有声的回复还是让我心跳加速。
　</p>
<blockquote>
<p>I have observed <u>friendship</u> as one observes high holy days: breathtakingly <u>short</u>, whirlwinds of intimate endeavour, frenzied carousing, the sharing of food, of wine, of honey. Compressed, always, and gone as soon as they come. It is often my duty to fall in love convincingly, and certainly I’ve received no complaints. But that is work, and <u>there are better things of which to write.</u></p>
</blockquote>
<p> 友谊短暂，来来去去。
　</p>
<blockquote>
<p>It is difficult—<u>it is very difficult, to befriend where you wish to consume</u>, to find those who, when they ask Do I have you still, when they end a letter with Yours, mean it in any substantive way.</p>
</blockquote>
<p>想起金克木的《保险朋友》，一旦心生杂念那么一切皆无。
　</p>
<blockquote>
<p>So I go. I travel farther and faster and harder than most, and I read, and I write, and I love cities. <strong>To be alone in a crowd, apart and belonging, to have distance between what I see and what I am.</strong></p>
</blockquote>
<p>重读这句话，真的不是我本人写下来的吗…?
　</p>
<blockquote>
<p>Blue carries nothing with her between strands except knowledge, purpose, tactics, and Red’s letters. Memory is tipped and decanted into Garden, life to life to life, always deepening, thickening, growing new roots and efficiencies—but Red’s letters she keeps in her own body, curled beneath her tongue like coins, printed in her fingers’ tips, between the lines of her palms. She presses them against her teeth before kissing her marks, reads them over when she shifts her grip on motorcycle handles, dusts soldiers’ chins with them in bar fights and barracks games.</p>
</blockquote>
<p>爱一个人的文字，让它进入自己的记忆，融入自己的身体，成为自己的一部分。</p>
<p>　</p>
<blockquote>
<p>I could not have beaten the beast alone. You’re more ferocious than I am.</p>
</blockquote>
<p><em>horrible at flirting</em> lol
　</p>
<blockquote>
<p>Anyway. Keep this. It’s yours. It won’t burn when you read the signature, it won’t decay faster than any letter one woman in your beloved Strand 6 C19 would write to another. The paper’s from Wuhan, Song dynasty, handmade: Leave it in a damp place and it will rot; mix it in water and you’ll have a pulp. Destroy it on your own, in your own way, if you want. I won’t mind. We all have our observers. <u>And this letter is a knife at my neck, if cutting’s what you want.</u></p>
</blockquote>
<p>时间旅行的魅力是，今天我在抚摸年轮，明天我的信写在羊皮纸上，承载语言的载体可能不同，但是我有一种永恒的心情。
　</p>
<blockquote>
<p>I try not to think of you the same way twice. <strong>Thinking builds patterns in the brain, and those patterns can be read by one sufficiently determined</strong></p>
</blockquote>
<p> 这句话蓝说的是红的长官。
　</p>
<blockquote>
<p>If you have some grand plan, if the death your masters envisioned for my younger self was too quick and you’d rather see me disassembled for my parts, all you need do now is drop this letter where some other agent of my faction might find it. I could live with that. (Well, not for long, and painfully, but you take my meaning.)<br><strong>So in this letter I am yours. Not Garden’s, not your mission’s, but yours, alone.</strong></p>
<p>I am yours in other ways as well: yours as I watch the world for your signs, apophenic as a haruspex; yours as I debate methods, motives, chances of delivery; yours as I review your words by their sequence, their sound, smell, taste, taking care no one memory of them becomes too worn. Yours. Still, I suspect you will appreciate the token</p>
</blockquote>
<p> 看得我心脏好痛
　</p>
<blockquote>
<p>Words are abstraction, break off from the green; words are patterns in the way fences and trenches are.</p>
<p>Words hurt. I can hide in words so long as I scatter them through my body; to read your letters is to gather flowers from within myself, pluck a blossom here, a fern there, arrange and rearrange them in ways to suit a sunny room.</p>
</blockquote>
<p>和下面这段　</p>
<blockquote>
<p>Letters are structures, not events. Yours give me a place to live inside.</p>
<p>My memories of you spread through millennia, and each highlights you in motion.</p>
<p>You are yourself, and so remain, as I remain</p>
</blockquote>
<p>我引用过很多次卡森的关于syntax的话了。读到这些文字的时候我心如刀绞——横跨语言的三域，每一个都存在于你。</p>
<blockquote>
<p>I miss you in the field. I miss defeat. I miss the chase, the fury. I miss victories well earned. Your fellows have their intrigues and their passions, and now and again a clever play, but there’s none so intricate, so careful, so assured. You’ve whetted me like a stone. I feel almost invincible in our battles’ wake: a kind of Achilles, fleet footed and light of touch. Only in this nonexistent place our letters weave do I feel weak.</p>
<p>How I love to have no armor here.</p>
<p>You wish you could hold me at knifepoint again. <u>You do, still, in a way. So long as I bear these last three seeds in a hollow behind my eye, you are a blade against my back. I <strong>love the danger</strong> of it</u></p>
<p>I cannot <u>endanger us, endanger you</u>, any further. But I am the songbird running out of air, and I must breathe.<br>I dream.</p>
</blockquote>
<p>这段诗意至极。</p>
<p>边界是危险的，即使我们有合二为一的渴望（love the danger），我们仍然无法兀自走向边界，因为这伴随着自我摧毁和摧毁对方的风险（后者更重要）。呼吸在古典学里则是另外一个重要的暗喻——呼吸的器官“肺”不仅仅是用来吐息，也是古典学语境里用来感知世界的器官。</p>
<blockquote>
<p>I wanted to say, your letter lives inside me in the most literal way possible, but didn’t, and you wrote to me of structures and events. I wanted to say, <strong>words hurt</strong>, but metaphors go between, like bridges, and words are like stone to build bridges, hewn from the earth in agony but making a new thing, a shared thing, a thing that is more than one Shift.<br>But I didn’t, and you spoke of wounds.</p>
</blockquote>
<p>呼应了上面的words hurt.
　</p>
<blockquote>
<p><strong>I veer rhapsodic; my prose purples.</strong></p>
</blockquote>
<p><em>almost utterly ineffable</em> 的三个词。紧跟着她说她有过性有过友谊但是没有过这样的爱情，这是一种利维坦一般的庞然大物。如果说要在这本充斥着佳句的作品里找出最Sapphic的一句话，这句当之无愧。</p>
<blockquote>
<p>I sought loneliness when I was young. You’ve seen me there: on my promontory, patient and unaware.<br>But when I think of you, <strong>I want to be alone together</strong>. I want to strive against and for. I want to live in contact. <strong>I want to be a context for you, and you for me.</strong><br>I love you, and I love you, and I want to find out what that means together</p>
</blockquote>
<p><em>be alone together</em>矛盾的结合，是边界消融。</p>
<p>爱不能成为理由，因为爱本身是空洞的，没有意义的，这个意义是需要自己去赋予的。</p>
<blockquote>
<p>I see one solution. It’s—it should be—easy.<br><u>Let me go. And I’ll let you.</u></p>
</blockquote>
<p><em>So I will let her go when time comes.</em> 成全是她的表白。</p>
<blockquote>
<p>We burrow into the braidedness of time. We are the hedge, entirely, rosebuds with thorns for petals.</p>
</blockquote>
<p>我们在战胜了时间纷扰，因为在这里有一种永恒，存在于文本，存在于时间旅行的她们自身，也存在于反复的挫败和复活。</p>
<p>最后是两位作者在致谢里的一段话：</p>
<blockquote>
<p>Keep reading. Keep writing. Keep fighting. We’re all still here.</p>
</blockquote>
<p>P.S. 提到了<a href="https://en.wikipedia.org/wiki/Naomi_Mitchison" target="_blank" rel="external">苏格兰作家Naomi Mitchison</a>，这个名字一看上去还以为是个日本人。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Literature/" rel="tag"># Literature</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/book-reports/230510-the-greeks-and-the-irrational/" rel="next" title="希腊人与非理性">
                <i class="fa fa-chevron-left"></i> 希腊人与非理性
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/book-reports/230517-readings-in-chinese-literary-thought/" rel="prev" title="中国文学思想读本">
                中国文学思想读本 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Dori-min" />
          <p class="site-author-name" itemprop="name">Dori-min</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">140</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2018 - 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dori-min</span>
</div>





        

        
      </div>
    </footer>

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  


  

  

</body>
</html>
